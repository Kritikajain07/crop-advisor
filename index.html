<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🌾 Crop Advisor</title>
  <style>
    :root {
      --brand: #2f6d2f; --brand-dark: #255425; --accent: #ff7043;
      --bg-top: #f0fdf4; --bg-bottom: #ffffff;
      --text: #1f2937; --muted: #6b7280; --card: #ffffff;
    }
    body { margin:0; font-family:system-ui; background:linear-gradient(to bottom,var(--bg-top),var(--bg-bottom)); }
    header { text-align:center; padding:32px 16px; }
    header h1 { margin:0; font-size:28px; color:var(--brand); }
    header p { color:var(--muted); margin-top:8px; }
    .form-container { max-width:900px; margin:16px auto; background:#fff; padding:20px; border-radius:16px; box-shadow:0 6px 12px rgba(0,0,0,.1);}
    .grid { display:grid; gap:12px; grid-template-columns:repeat(12,1fr);}
    .col-6 { grid-column:span 6;} .col-3 {grid-column:span 3;} .col-12{grid-column:span 12;}
    @media(max-width:768px){.col-6,.col-3{grid-column:span 12;}}
    label{font-weight:600;font-size:14px;}
    input,select{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;}
    button{padding:10px 14px;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:0.2s;}
    .btn-primary{background:var(--brand);color:#fff;}
    .btn-primary:hover{background:var(--brand-dark);}
    .btn-mic{background:var(--accent);color:#fff;}
    .btn-mic:hover{opacity:0.9;}
    .results{max-width:1000px;margin:24px auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;}
    .card{background:#fff;padding:16px;border-radius:16px;box-shadow:0 4px 10px rgba(0,0,0,.1);text-align:center;}
    .card h2{color:var(--brand);margin-bottom:8px;}
    footer{background:var(--brand);color:#fff;text-align:center;padding:16px;margin-top:30px;}
    .input-group{display:flex;gap:8px;align-items:center;}
    .input-group input{flex:1;}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;justify-content:center;align-items:center;gap:10px;">
      <!-- Inline SVG Leaf Logo -->
      <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="#2f6d2f" viewBox="0 0 24 24">
        <path d="M12 2C8 6 4 10 4 15c0 5 4 7 8 7s8-2 8-7c0-5-4-9-8-13z"/>
      </svg>
      <h1>Crop Advisor</h1>
    </div>
    <p>Smart Crop Recommendation with Voice & GPS</p>
  </header>

  <section class="form-container">
    <form class="grid">
      <div class="col-6">
        <label for="location">Location</label>
        <div class="input-group">
          <input id="location" type="text" placeholder="City, District or Pincode">
          <button type="button" class="btn-mic" onclick="startListening('location')">🎙</button>
          <button type="button" id="btnGPS">📍</button>
        </div>
      </div>
      <div class="col-6">
        <label>Soil type</label>
        <div class="input-group">
          <input id="soil" type="text">
          <button type="button" class="btn-mic" onclick="startListening('soil')">🎙</button>
        </div>
      </div>
      <div class="col-3">
        <label>Nitrogen (N)</label>
        <div class="input-group">
          <input id="n" type="number">
          <button type="button" class="btn-mic" onclick="startListening('n')">🎙</button>
        </div>
      </div>
      <div class="col-3">
        <label>Phosphorus (P)</label>
        <div class="input-group">
          <input id="p" type="number">
          <button type="button" class="btn-mic" onclick="startListening('p')">🎙</button>
        </div>
      </div>
      <div class="col-3">
        <label>Potassium (K)</label>
        <div class="input-group">
          <input id="k" type="number">
          <button type="button" class="btn-mic" onclick="startListening('k')">🎙</button>
        </div>
      </div>
      <div class="col-3">
        <label>pH</label>
        <div class="input-group">
          <input id="ph" type="number">
          <button type="button" class="btn-mic" onclick="startListening('ph')">🎙</button>
        </div>
      </div>
      <div class="col-6">
        <label>Temperature (°C)</label>
        <div class="input-group">
          <input id="temperature" type="number">
          <button type="button" class="btn-mic" onclick="startListening('temperature')">🎙</button>
        </div>
      </div>
      <div class="col-6">
        <label>Humidity (%)</label>
        <div class="input-group">
          <input id="humidity" type="number">
          <button type="button" class="btn-mic" onclick="startListening('humidity')">🎙</button>
        </div>
      </div>
      <div class="col-6">
        <label>Language</label>
        <select id="language">
          <option value="en-IN" selected>English</option>
          <option value="hi-IN">Hindi</option>
          <option value="mr-IN">Marathi</option>
          <option value="gu-IN">Gujarati</option>
          <option value="ta-IN">Tamil</option>
          <option value="te-IN">Telugu</option>
          <option value="bn-IN">Bengali</option>
          <option value="kn-IN">Kannada</option>
          <option value="ml-IN">Malayalam</option>
          <option value="pa-IN">Punjabi</option>
        </select>
      </div>
      <div class="col-12">
        <button type="button" class="btn-primary" id="btnRecommend">Recommend</button>
        <span id="status"></span>
      </div>
    </form>
  </section>

  <section class="results" id="results"></section>
  <footer>© <span id="year"></span> Crop Advisor — Smart Agriculture Project</footer>

<script>
const resultsEl=document.getElementById("results");
const statusEl=document.getElementById("status");
const gpsBtn=document.getElementById("btnGPS");

const DUMMY_CROPS=[
 {name:"Wheat",yield:"3.2 tons/acre",price:"₹2200/q",water:"Medium"},
 {name:"Chickpea",yield:"2.5 tons/acre",price:"₹4800/q",water:"Low"},
 {name:"Mustard",yield:"2.8 tons/acre",price:"₹5600/q",water:"Low"}
];

const TRANSLATIONS={
 "hi-IN":{Wheat:"गेहूं",Chickpea:"चना",Mustard:"सरसों","Expected yield":"उपज","Market price":"बाज़ार मूल्य","Water need":"पानी की आवश्यकता",High:"उच्च",Medium:"मध्यम",Low:"कम"},
 "mr-IN":{Wheat:"गहू",Chickpea:"हरभरा",Mustard:"मोहरी","Expected yield":"उत्पन्न","Market price":"बाजारभाव","Water need":"पाण्याची गरज",High:"जास्त",Medium:"मध्यम",Low:"कमी"},
 "gu-IN":{Wheat:"ગહું",Chickpea:"ચણા",Mustard:"સરસો","Expected yield":"ઉત્પાદન","Market price":"બજાર ભાવ","Water need":"પાણીની જરૂર",High:"ઉચ્ચ",Medium:"મધ્યમ",Low:"ઓછું"},
 "ta-IN":{Wheat:"கோதுமை",Chickpea:"கொண்டைக்கடலை",Mustard:"கடுகு","Expected yield":"முன்னறிவிக்கப்பட்ட விளைச்சல்","Market price":"சந்தை விலை","Water need":"தண்ணீர் தேவை",High:"அதிகம்",Medium:"நடுத்தர",Low:"குறைவு"},
 "te-IN":{Wheat:"గోధుమ",Chickpea:"సెనగలు",Mustard:"ఆవాలు","Expected yield":"అంచనా దిగుబడి","Market price":"మార్కెట్ ధర","Water need":"నీటి అవసరం",High:"అధిక",Medium:"మధ్యస్థ",Low:"తక్కువ"},
 "bn-IN":{Wheat:"গম",Chickpea:"ছোলা",Mustard:"সরিষা","Expected yield":"আনুমানিক ফলন","Market price":"বাজার মূল্য","Water need":"জল প্রয়োজন",High:"উচ্চ",Medium:"মাঝারি",Low:"কম"},
 "kn-IN":{Wheat:"ಗೋಧಿ",Chickpea:"ಕಡಲೆ",Mustard:"ಸಾಸಿವೆ","Expected yield":"ಅಂದಾಜು ಉತ್ಪಾದನೆ","Market price":"ಮಾರುಕಟ್ಟೆ ಬೆಲೆ","Water need":"ನೀರಿನ ಅವಶ್ಯಕತೆ",High:"ಹೆಚ್ಚು",Medium:"ಮಧ್ಯಮ",Low:"ಕಡಿಮೆ"},
 "ml-IN":{Wheat:"ഗോതമ്പ്",Chickpea:"കടല",Mustard:"കടുക്","Expected yield":"പ്രതീക്ഷിക്കുന്ന വിളവ്","Market price":"ചന്ത വില","Water need":"വെള്ളത്തിന്റെ ആവശ്യം",High:"ഉയരം",Medium:"ഇടത്തരം",Low:"കുറവ്"},
 "pa-IN":{Wheat:"ਗੇਂਹੂ",Chickpea:"ਚਨਾ",Mustard:"ਸਰੋਂ","Expected yield":"ਉਪਜ","Market price":"ਬਾਜ਼ਾਰ ਕੀਮਤ","Water need":"ਪਾਣੀ ਦੀ ਲੋੜ",High:"ਵੱਧ",Medium:"ਦਰਮਿਆਨਾ",Low:"ਘੱਟ"}
};

function renderResults(crops){
 const lang=document.getElementById("language").value;
 const t=TRANSLATIONS[lang]||{};
 resultsEl.innerHTML="";
 crops.forEach(crop=>{
   const name=t[crop.name]||crop.name;
   const yieldLabel=t["Expected yield"]||"Expected yield";
   const priceLabel=t["Market price"]||"Market price";
   const waterLabel=t["Water need"]||"Water need";
   const waterValue=t[crop.water]||crop.water;
   resultsEl.innerHTML+=`
   <div class="card">
     <h2>${name}</h2>
     <p><b>${yieldLabel}:</b> ${crop.yield}</p>
     <p><b>${priceLabel}:</b> ${crop.price}</p>
     <p><b>${waterLabel}:</b> ${waterValue}</p>
   </div>`;
 });
}
renderResults(DUMMY_CROPS);

// 🎙 Voice recognition for specific fields
function startListening(fieldId){
 const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
 if(!SR){alert("Speech recognition not supported");return;}
 const rec=new SR();
 const lang=document.getElementById("language").value;
 rec.lang=lang; rec.interimResults=false; rec.maxAlternatives=1;
 statusEl.textContent=`🎤 Listening for ${fieldId}...`;
 rec.onresult=(e)=>{
   document.getElementById(fieldId).value=e.results[0][0].transcript;
   statusEl.textContent=`✅ Filled ${fieldId}: ${e.results[0][0].transcript}`;
 };
 rec.onspeechend=()=>rec.stop();
 rec.onerror=(e)=>{alert("Error: "+e.error);statusEl.textContent="";};
 rec.start();
}

// 📍 GPS location detection
gpsBtn.addEventListener("click",()=>{
 if(navigator.geolocation){
   statusEl.textContent="📡 Detecting location...";
   navigator.geolocation.getCurrentPosition(async (pos)=>{
     const lat=pos.coords.latitude.toFixed(4);
     const lon=pos.coords.longitude.toFixed(4);
     try{
       const res=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`);
       const data=await res.json();
       const address=data.address.city||data.address.town||data.address.village||data.display_name;
       document.getElementById("location").value=`${address} (${lat}, ${lon})`;
       statusEl.textContent=`✅ Location detected: ${address}`;
     }catch(err){
       document.getElementById("location").value=`${lat}, ${lon}`;
       statusEl.textContent="⚠️ Coordinates only (API error)";
     }
   },(err)=>{statusEl.textContent="❌ Location error: "+err.message;});
 }else{
   alert("Geolocation not supported by browser.");
 }
});

document.getElementById("year").textContent=new Date().getFullYear();
</script>
</body>
</html>